# 易控车机版(Easycontrol_For_Car)使用说明

## 注意
1. 若安卓14及以上版本画面出现异常，可尝试在设置中打开“安卓14兼容模式”
2. app未打开状态通过快捷方式直接启动USB设备需点击两次，第二次弹出的授权通知请授权
3. 画中画内使用请务必在软件设置内打开“始终全屏模式”

## 准备操作
1. 被控端手机连续点击关于手机-版本号，直至提示打开开发者选项
2. 被控端手机设置中找到开发者选项
	- 打开“USB调试”
	- 打开“停用ADB授权超时功能”
	- 打开“USB调试(安全调试)”（MIUI设备）
	- 打开“USB安装”（如果有则打开）
	- 打开“关闭权限监控”（如果有则打开）
#### 注意: 重启被控端手机后，需要重新检查上述操作

## 软件使用
1. 简单使用-有线连接
	1. 主控端安装易控车机版，打开软件，给予悬浮窗授权或使用始终全屏模式
	2. 利用数据线将主控端与被控端连接，主控端易控车机版界面允许易控车机版访问设备
	3. 被控端授权允许主控端连接，勾选一律允许
	4. 点击主控端易控车机版列表中出现的新有线设备
	5. 选择屏幕镜像或应用流转模式进行连接
	
2. 简单使用-无线连接
	1. 主控端安装易控车机版，打开软件，给予悬浮窗授权或使用始终全屏模式
	2. 确保主控端能够访问被控端（例如在一个wifi下面）
	3.  - 打开被控端无线调试（并非开发者选项中的无线调试）
	    - （可使用上面有线连接，随后长按设备点击“打开无线”按钮实现）
        - （安卓11及以上可在被控端下载[Shizuku](https://github.com/RikkaApps/Shizuku/releases)，在Shizuku内配对）
	4. 主控端易控车机版界面点击右上角添加设备
	    - 在设备地址处输入被控端地址（地址:端口）
		- 地址格式（例）：
			- IPv4：192.168.43.1:5555
			- IPv6：[2408:8462:2510:1e05:c39:3262:632d:1a3d]:5555
			- 域名：example.com:5555
		- 也可点击扫描按钮，扫描C类地址（掩码为255.255.255.0）下的设备
	5. 被控端授权允许主控端连接，勾选一律允许
	6. 选择屏幕镜像或应用流转模式进行连接

3. 界面使用
    <img src="pic/screenshot/small_usage.webp">
	1. 工具栏
		- 在小窗模式下点击上横条，可查看工具栏
		- 在全屏模式下点击导航栏更多按钮，可查看工具栏
	2. 小窗模式
		- 可通过拖动横条移动小窗
		- 拖动右下角可更改小窗大小
	3. 最小化模式
		- 可上下拖动
		- 单击返回小窗模式
	4. 全屏模式
		- 底部为导航栏，可向被控端发送多任务、桌面、返回按键
		- 导航栏左边旋转按钮，可以控制被控端页面旋转，仅请求旋转，实际是否旋转看被控端当前应用是否允许
		- 全屏页面方向跟随手机重力方向（可在工具栏中锁定）

4. 高级使用
	- 在添加设备时或长按设备点击“修改”按钮，设置高级选项，可开关黑暗模式同步、剪切板同步，自定义编解码参数、投屏控制参数等
	- 设置中可设置编码参数等默认选项，添加设备时默认使用这些参数，如对单个设备进行了修改，则以该设备参数为准
	- 特殊地址标识符，在添加设备时可用于代表特殊地址：
		- 网关地址：\*gateway\*，如网关为192.168.43.1，则“\*gateway\*:5555”表示“192.168.43.1:5555”
		- 子网地址：\*netAddress\*，如子网为192.168.43.0/24, 则“\*netAddress\*.1:5555”表示“192.168.43.1:5555”
	
5. 扩展使用
	1. 易控车机版支持在外部使用广播控制
		
		广播地址为："**top.eiyooooo.easycontrol.app.CONTROL**"，需要向意向也就是Intent填入想要做的动作
		- 启动默认设备：
			- action：startDefault
		    - mode：0, 1 （可选，默认为0，0:屏幕镜像，1:应用流转）
		- 启动目标设备：
			- action：start
			- uuid：设备ID
			- mode：0, 1 （可选，默认为0，0:屏幕镜像，1:应用流转）
		- 目标设备变成小窗：
			- action：changeToSmall
			- uuid：设备ID
		- 目标设备最小化：
			- action：changeToMini
			- uuid：设备ID
		- 目标设备全屏：
			- action：changeToFull
			- uuid：设备ID
		- 目标设备按下电源键：
			- action：buttonPower
			- uuid：设备ID
		- 目标设备唤醒：
			- action：buttonWake
			- uuid：设备ID
		- 目标设备锁定：
			- action：buttonLock
			- uuid：设备ID
		- 目标设备打开背光：
			- action：buttonLight
			- uuid：设备ID
		- 目标设备关闭背光：
			- action：buttonLightOff
			- uuid：设备ID
		- 目标设备按下返回键：
			- action：buttonBack
			- uuid：设备ID
		- 目标设备按下桌面键：
			- action：buttonHome
			- uuid：设备ID
		- 目标设备按下最近任务键：
			- action：buttonSwitch
			- uuid：设备ID
		- 目标设备旋转屏幕：
			- action：buttonRotate
			- uuid：设备ID
		- 目标设备关闭投屏：
			- action：close
			- uuid：设备ID
		- 目标设备执行命令：
			- action：runShell
			- uuid：设备ID
			- cmd: 命令

	2. 可通过快捷方式直接启动默认USB或无线设备
		- 软件内创建：
			- 长按设备创建快捷方式（若包名存在则快捷方式为单应用流转）
			- 设置内创建启动默认设备快捷方式
		- 自行创建：
			- StartDeviceActivity启动设备
				- 可添加uuid参数，指定设备ID
				- 不指定uuid参数则启动默认设备